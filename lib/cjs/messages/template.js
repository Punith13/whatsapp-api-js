"use strict";var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __hasOwnProp=Object.prototype.hasOwnProperty;var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(let key of __getOwnPropNames(from))!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod);var template_exports={};__export(template_exports,{BodyComponent:()=>BodyComponent,BodyParameter:()=>BodyParameter,ButtonComponent:()=>ButtonComponent,ButtonParameter:()=>ButtonParameter,Currency:()=>Currency,DateTime:()=>DateTime,HeaderComponent:()=>HeaderComponent,HeaderParameter:()=>HeaderParameter,Language:()=>Language,Template:()=>Template});module.exports=__toCommonJS(template_exports);var ClientMessage=class{_build(){return JSON.stringify(this)}};var ClientLimitedMessageComponent=class{constructor(p,c,a,n){if(a.length>n)throw new Error(`${p} can't have more than ${n} ${c}`)}};var Template=class extends ClientMessage{name;language;components;get _type(){return"template"}constructor(name,language,...components){if(super(),this.name=name,this.language=typeof language=="string"?new Language(language):language,components.length){let theres_only_body=components.length===1&&components[0]instanceof BodyComponent;this.components=components.map(cmpt=>cmpt._build(theres_only_body)).flat()}}},Language=class{code;policy;constructor(code,policy="deterministic"){this.policy=policy,this.code=code}},Currency=class{amount_1000;code;fallback_value;get _type(){return"currency"}constructor(amount_1000,code,fallback_value){if(amount_1000<=0)throw new Error("Currency must have an amount_1000 greater than 0");this.amount_1000=amount_1000,this.code=code,this.fallback_value=fallback_value}},DateTime=class{fallback_value;get _type(){return"date_time"}constructor(fallback_value){this.fallback_value=fallback_value}},ButtonComponent=class extends ClientLimitedMessageComponent{type;sub_type;parameters;constructor(sub_type,...parameters){super("ButtonComponent","parameters",parameters,3);let buttonType=sub_type==="url"?"text":"payload",processed=parameters.map(e=>e.length?new ButtonParameter(e,buttonType):null);this.type="button",this.sub_type=sub_type,this.parameters=processed}_build(){return this.parameters.map((p,i)=>p?{type:this.type,sub_type:this.sub_type,index:i.toString(),parameters:[p]}:null).filter(e=>!!e)}},ButtonParameter=class{type;text;payload;constructor(param,type){if(!param.length)throw new Error("Button parameter can't be an empty string");this.type=type,this[type]=param}},HeaderComponent=class{type;parameters;constructor(...parameters){this.type="header",this.parameters=parameters}_build(){return this}},HeaderParameter=class{type;text;currency;date_time;image;document;video;location;constructor(parameter){if(typeof parameter=="string"){if(parameter.length>60)throw new Error("Header text must be 60 characters or less");this.type="text"}else{if(parameter._type==="location"&&!(parameter.name&&parameter.address))throw new Error("Header location must have a name and address");this.type=parameter._type}Object.defineProperty(this,this.type,{value:parameter,enumerable:!0})}},BodyComponent=class{type;parameters;constructor(...parameters){this.type="body",this.parameters=parameters}_build(theres_only_body){if(this.parameters&&!theres_only_body){for(let param of this.parameters)if(param.text&&param.text?.length>1024)throw new Error("Body text must be 1024 characters or less")}return this}},BodyParameter=class{type;text;currency;date_time;constructor(parameter){if(typeof parameter=="string"){if(parameter.length>32768)throw new Error("Body text must be 32768 characters or less");this.type="text"}else this.type=parameter._type;Object.defineProperty(this,this.type,{value:parameter,enumerable:!0})}};0&&(module.exports={BodyComponent,BodyParameter,ButtonComponent,ButtonParameter,Currency,DateTime,HeaderComponent,HeaderParameter,Language,Template});
//# sourceMappingURL=template.js.map
