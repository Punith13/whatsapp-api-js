"use strict";var w=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var re=Object.getOwnPropertyNames;var se=Object.prototype.hasOwnProperty;var ne=(n,t)=>{for(var e in t)w(n,e,{get:t[e],enumerable:!0})},ie=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of re(t))!se.call(n,s)&&s!==e&&w(n,s,{get:()=>t[s],enumerable:!(r=te(t,s))||r.enumerable});return n};var oe=n=>ie(w({},"__esModule",{value:!0}),n);var pe={};ne(pe,{ActionButtons:()=>I,ActionCatalog:()=>q,ActionList:()=>N,Address:()=>C,Audio:()=>j,Birthday:()=>M,Body:()=>L,BodyComponent:()=>b,BodyParameter:()=>Z,Button:()=>D,ButtonComponent:()=>Y,ButtonParameter:()=>v,Contacts:()=>S,Currency:()=>J,DateTime:()=>G,Document:()=>H,Email:()=>E,Footer:()=>P,Header:()=>O,HeaderComponent:()=>K,HeaderParameter:()=>X,Image:()=>U,Interactive:()=>A,Language:()=>_,ListSection:()=>$,Location:()=>u,Media:()=>l,Name:()=>R,Organization:()=>k,Phone:()=>T,Product:()=>Q,ProductSection:()=>x,Reaction:()=>m,Row:()=>V,Section:()=>h,Sticker:()=>z,Template:()=>W,Text:()=>y,Url:()=>B,Video:()=>F});module.exports=oe(pe);var a=class{_build(){return JSON.stringify(this)}};var c=class{constructor(t,e,r,s){if(r.length>s)throw new Error(`${t} can't have more than ${s} ${e}`)}},f=class{_build(){return this}},g=class extends f{get _many(){return!0}},d=class extends f{get _many(){return!1}};var y=class extends a{constructor(e,r){super();if(e.length>4096)throw new Error("Text body must be less than 4096 characters");this.body=e,r&&(this.preview_url=r)}get _type(){return"text"}};var u=class extends a{constructor(e,r,s,i){super();this.longitude=e,this.latitude=r,s&&(this.name=s),i&&(this.address=i)}get _type(){return"location"}};var m=class extends a{constructor(e,r=""){super();if(r&&!/^\p{Extended_Pictographic}$/u.test(r))throw new Error("Reaction emoji must be a single emoji");this.message_id=e,this.emoji=r}get _type(){return"reaction"}};var S=class extends a{constructor(...e){super();this.component=[];for(let r of e){let s={};for(let i of r){let o=i._type;if(i._many)o in s||Object.defineProperty(s,o,{value:[]}),s[o].push(i._build());else{if(o in s)throw new Error(`Contact already has a ${o} component and _many is set to false`);s[o]=i._build()}}if(!s.name)throw new Error("Contact must have a name component");this.component.push(s)}}get _type(){return"contacts"}_build(){return JSON.stringify(this.component)}},C=class extends g{constructor(e,r,s,i,o,p,ee){super();e&&(this.country=e),r&&(this.country_code=r),s&&(this.state=s),i&&(this.city=i),o&&(this.street=o),p&&(this.zip=p),ee&&(this.type=ee)}get _type(){return"addresses"}},M=class extends d{constructor(e,r,s){super();if(e.length!==4)throw new Error("Year must be 4 digits");if(r.length!==2)throw new Error("Month must be 2 digits");if(s.length!==2)throw new Error("Day must be 2 digits");this.birthday=`${e}-${r}-${s}`}get _type(){return"birthday"}_build(){return this.birthday}},E=class extends g{constructor(e,r){super();e&&(this.email=e),r&&(this.type=r)}get _type(){return"emails"}},R=class extends d{constructor(e,r,s,i,o,p){super();if(this.formatted_name=e,r&&(this.first_name=r),s&&(this.last_name=s),i&&(this.middle_name=i),o&&(this.suffix=o),p&&(this.prefix=p),Object.keys(this).length<2)throw new Error("Name must have at least one of the following: first_name, last_name, middle_name, prefix, suffix")}get _type(){return"name"}},k=class extends d{constructor(e,r,s){super();e&&(this.company=e),r&&(this.department=r),s&&(this.title=s)}get _type(){return"org"}},T=class extends g{constructor(e,r,s){super();e&&(this.phone=e),r&&(this.type=r),s&&(this.wa_id=s)}get _type(){return"phones"}},B=class extends g{constructor(e,r){super();e&&(this.url=e),r&&(this.type=r)}get _type(){return"urls"}};var A=class extends a{constructor(e,r,s,i){super();if(e._type!=="product"&&!r)throw new Error("Interactive must have a body component");if(e._type==="product"&&s)throw new Error("Interactive must not have a header component if action is a single product");if(e._type==="product_list"&&s?.type!=="text")throw new Error("Interactive must have a text header component if action is a product list");if(s&&e._type!=="button"&&s?.type!=="text")throw new Error("Interactive header must be of type text");this.type=e._type,this.action=e,r&&(this.body=r),s&&(this.header=s),i&&(this.footer=i)}get _type(){return"interactive"}},L=class{constructor(t){if(t.length>1024)throw new Error("Body text must be less than 1024 characters");this.text=t}},P=class{constructor(t){if(t.length>60)throw new Error("Footer text must be 60 characters or less");this.text=t}},O=class{constructor(t){if(typeof t=="string"){if(t.length>60)throw new Error("Header text must be 60 characters or less");this.type="text"}else if(this.type=t._type,"caption"in t)throw new Error(`Header ${this.type} must not have a caption`);this[this.type]=t}},I=class extends c{constructor(...e){super("Reply buttons","button",e,3);let r=e.map(i=>i[i.type].id);if(r.length!==new Set(r).size)throw new Error("Reply buttons must have unique ids");let s=e.map(i=>i[i.type].title);if(s.length!==new Set(s).size)throw new Error("Reply buttons must have unique titles");this.buttons=e}get _type(){return"button"}},D=class{constructor(t,e){if(t.length>256)throw new Error("Button id must be 256 characters or less");if(/^ | $/.test(t))throw new Error("Button id cannot have leading or trailing spaces");if(e.length>20)throw new Error("Button title must be 20 characters or less");this.type="reply",this.reply={title:e,id:t}}},N=class extends c{constructor(e,...r){super("Action","sections",r,10);if(e.length>20)throw new Error("Button content must be 20 characters or less");if(r.length>1&&!r.every(s=>"title"in s))throw new Error("All sections must have a title if more than 1 section is provided");this.button=e,this.sections=r}get _type(){return"list"}},h=class extends c{constructor(e,r,s,i,o,p=24){super(e,r,s,i);if(o&&o.length>p)throw new Error(`${e} title must be ${p} characters or less`);o&&(this.title=o)}},$=class extends h{constructor(e,...r){super("ListSection","rows",r,10,e);this.rows=r}},V=class{constructor(t,e,r){if(t.length>200)throw new Error("Row id must be 200 characters or less");if(e.length>24)throw new Error("Row title must be 24 characters or less");if(r&&r.length>72)throw new Error("Row description must be 72 characters or less");this.id=t,this.title=e,r&&(this.description=r)}};function ae(n){return n[0]instanceof x}var q=class{get _type(){return this.product_retailer_id?"product":"product_list"}constructor(t,...e){let r=ae(e);if(r&&e.length>1){if(e.length>10)throw new Error("Catalog must have between 1 and 10 product sections");for(let s of e)if(!("title"in s))throw new Error("All sections must have a title if more than 1 section is provided")}this.catalog_id=t,r?this.sections=e:this.product_retailer_id=e[0].product_retailer_id}},x=class extends h{constructor(e,...r){super("ProductSection","products",r,30,e);this.product_items=r}},Q=class{constructor(t){this.product_retailer_id=t}};var l=class extends a{constructor(e,r=!1){super();this[r?"id":"link"]=e}},j=class extends l{get _type(){return"audio"}constructor(t,e=!1){super(t,e)}},H=class extends l{constructor(e,r=!1,s,i){super(e,r);s&&(this.caption=s),i&&(this.filename=i)}get _type(){return"document"}},U=class extends l{constructor(e,r=!1,s){super(e,r);s&&(this.caption=s)}get _type(){return"image"}},z=class extends l{get _type(){return"sticker"}constructor(t,e=!1){super(t,e)}},F=class extends l{constructor(e,r=!1,s){super(e,r);s&&(this.caption=s)}get _type(){return"video"}};var W=class extends a{constructor(e,r,...s){super();if(this.name=e,this.language=typeof r=="string"?new _(r):r,s.length){let i=s.length===1&&s[0]instanceof b;this.components=s.map(o=>o._build(i)).flat()}}get _type(){return"template"}},_=class{constructor(t,e="deterministic"){this.policy=e,this.code=t}},J=class{get _type(){return"currency"}constructor(t,e,r){if(t<=0)throw new Error("Currency must have an amount_1000 greater than 0");this.amount_1000=t,this.code=e,this.fallback_value=r}},G=class{get _type(){return"date_time"}constructor(t){this.fallback_value=t}},Y=class extends c{constructor(e,...r){super("ButtonComponent","parameters",r,3);let s=e==="url"?"text":"payload",i=r.map(o=>new v(o,s));this.type="button",this.sub_type=e,this.parameters=i}_build(){return this.parameters.map((e,r)=>({type:this.type,sub_type:this.sub_type,index:r.toString(),parameters:[e]}))}},v=class{constructor(t,e){this.type=e,this[e]=t}},K=class{constructor(...t){this.type="header",this.parameters=t}_build(){return this}},X=class{constructor(t){if(typeof t=="string"){if(t.length>60)throw new Error("Header text must be 60 characters or less");this.type="text"}else{if(t._type==="location"&&!(t.name&&t.address))throw new Error("Header location must have a name and address");this.type=t._type}Object.defineProperty(this,this.type,{value:t})}},b=class{constructor(...t){this.type="body",this.parameters=t}_build(t){if(this.parameters&&!t){for(let e of this.parameters)if(e.text&&e.text?.length>1024)throw new Error("Body text must be 1024 characters or less")}return this}},Z=class{constructor(t){if(typeof t=="string"){if(t.length>32768)throw new Error("Body text must be 32768 characters or less");this.type="text"}else this.type=t._type;Object.defineProperty(this,this.type,{value:t})}};0&&(module.exports={ActionButtons,ActionCatalog,ActionList,Address,Audio,Birthday,Body,BodyComponent,BodyParameter,Button,ButtonComponent,ButtonParameter,Contacts,Currency,DateTime,Document,Email,Footer,Header,HeaderComponent,HeaderParameter,Image,Interactive,Language,ListSection,Location,Media,Name,Organization,Phone,Product,ProductSection,Reaction,Row,Section,Sticker,Template,Text,Url,Video});
