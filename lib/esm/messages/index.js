var ClientMessage=class{_build(){return JSON.stringify(this)}};var ClientLimitedMessageComponent=class{constructor(p,c,a,n){if(a.length>n)throw new Error(`${p} can't have more than ${n} ${c}`)}},ContactComponent=class{_build(){return this}},ContactMultipleComponent=class extends ContactComponent{get _many(){return!0}},ContactUniqueComponent=class extends ContactComponent{get _many(){return!1}};var Text=class extends ClientMessage{body;preview_url;get _type(){return"text"}constructor(body,preview_url){if(super(),body.length>4096)throw new Error("Text body must be less than 4096 characters");this.body=body,preview_url&&(this.preview_url=preview_url)}};var Location=class extends ClientMessage{longitude;latitude;name;address;get _type(){return"location"}constructor(longitude,latitude,name,address){super(),this.longitude=longitude,this.latitude=latitude,name&&(this.name=name),address&&(this.address=address)}};var Reaction=class extends ClientMessage{message_id;emoji;get _type(){return"reaction"}constructor(message_id,emoji=""){if(super(),emoji&&!/^\p{Extended_Pictographic}$/u.test(emoji))throw new Error("Reaction emoji must be a single emoji");this.message_id=message_id,this.emoji=emoji}};var Contacts=class extends ClientMessage{component;get _type(){return"contacts"}constructor(...contact){super(),this.component=[];for(let components of contact){let contact2={};for(let component of components){let name=component._type;if(component._many)contact2[name]||Object.defineProperty(contact2,name,{value:[],enumerable:!0}),contact2[name].push(component._build());else{if(contact2[name])throw new Error(`Contact already has a ${name} component and _many is set to false`);contact2[name]=component._build()}}if(!contact2.name)throw new Error("Contact must have a name component");this.component.push(contact2)}}_build(){return JSON.stringify(this.component)}},Address=class extends ContactMultipleComponent{country;country_code;state;city;street;zip;type;get _type(){return"addresses"}constructor(country,country_code,state,city,street,zip,type){super(),country&&(this.country=country),country_code&&(this.country_code=country_code),state&&(this.state=state),city&&(this.city=city),street&&(this.street=street),zip&&(this.zip=zip),type&&(this.type=type)}},Birthday=class extends ContactUniqueComponent{birthday;get _type(){return"birthday"}constructor(year,month,day){if(super(),year.length!==4)throw new Error("Year must be 4 digits");if(month.length!==2)throw new Error("Month must be 2 digits");if(day.length!==2)throw new Error("Day must be 2 digits");this.birthday=`${year}-${month}-${day}`}_build(){return this.birthday}},Email=class extends ContactMultipleComponent{email;type;get _type(){return"emails"}constructor(email,type){super(),email&&(this.email=email),type&&(this.type=type)}},Name=class extends ContactUniqueComponent{formatted_name;first_name;last_name;middle_name;suffix;prefix;get _type(){return"name"}constructor(formatted_name,first_name,last_name,middle_name,suffix,prefix){if(super(),this.formatted_name=formatted_name,first_name&&(this.first_name=first_name),last_name&&(this.last_name=last_name),middle_name&&(this.middle_name=middle_name),suffix&&(this.suffix=suffix),prefix&&(this.prefix=prefix),Object.keys(this).length<2)throw new Error("Name must have at least one of the following: first_name, last_name, middle_name, prefix, suffix")}},Organization=class extends ContactUniqueComponent{company;department;title;get _type(){return"org"}constructor(company,department,title){super(),company&&(this.company=company),department&&(this.department=department),title&&(this.title=title)}},Phone=class extends ContactMultipleComponent{phone;type;wa_id;get _type(){return"phones"}constructor(phone,type,wa_id){super(),phone&&(this.phone=phone),type&&(this.type=type),wa_id&&(this.wa_id=wa_id)}},Url=class extends ContactMultipleComponent{url;type;get _type(){return"urls"}constructor(url,type){super(),url&&(this.url=url),type&&(this.type=type)}};function isProductSections(obj){return obj[0]instanceof ProductSection}var Section=class extends ClientLimitedMessageComponent{title;constructor(name,keys_name,elements,max,title,title_length=24){if(super(name,keys_name,elements,max),title){if(title.length>title_length)throw new Error(`${name} title must be ${title_length} characters or less`);this.title=title}}},ProductSection=class extends Section{product_items;constructor(title,...products){super("ProductSection","products",products,30,title),this.product_items=products}},Product=class{product_retailer_id;constructor(product_retailer_id){this.product_retailer_id=product_retailer_id}};var Interactive=class extends ClientMessage{action;type;body;header;footer;get _type(){return"interactive"}constructor(action,body,header,footer){if(super(),action._type!=="product"&&!body)throw new Error("Interactive must have a body component");if(action._type==="product"&&header)throw new Error("Interactive must not have a header component if action is a single product");if(action._type==="product_list"&&header?.type!=="text")throw new Error("Interactive must have a text header component if action is a product list");if(header&&action._type!=="button"&&header?.type!=="text")throw new Error("Interactive header must be of type text");this.type=action._type,this.action=action,body&&(this.body=body),header&&(this.header=header),footer&&(this.footer=footer)}},Body=class{text;constructor(text){if(text.length>1024)throw new Error("Body text must be less than 1024 characters");this.text=text}},Footer=class{text;constructor(text){if(text.length>60)throw new Error("Footer text must be 60 characters or less");this.text=text}},Header=class{type;text;image;document;video;constructor(object){if(typeof object=="string"){if(object.length>60)throw new Error("Header text must be 60 characters or less");this.type="text"}else if(this.type=object._type,object.caption)throw new Error(`Header ${this.type} must not have a caption`);this[this.type]=object}},ActionButtons=class extends ClientLimitedMessageComponent{buttons;get _type(){return"button"}constructor(...button){super("Reply buttons","button",button,3);let ids=button.map(b=>b[b.type].id);if(ids.length!==new Set(ids).size)throw new Error("Reply buttons must have unique ids");let titles=button.map(b=>b[b.type].title);if(titles.length!==new Set(titles).size)throw new Error("Reply buttons must have unique titles");this.buttons=button}},Button=class{type;reply;constructor(id,title){if(id.length>256)throw new Error("Button id must be 256 characters or less");if(/^ | $/.test(id))throw new Error("Button id cannot have leading or trailing spaces");if(!title.length)throw new Error("Button title cannot be an empty string");if(title.length>20)throw new Error("Button title must be 20 characters or less");this.type="reply",this.reply={title,id}}},ActionList=class extends ClientLimitedMessageComponent{button;sections;get _type(){return"list"}constructor(button,...sections){if(super("Action","sections",sections,10),!button.length)throw new Error("Button content cannot be an empty string");if(button.length>20)throw new Error("Button content must be 20 characters or less");if(sections.length>1&&!sections.every(obj=>!!obj.title))throw new Error("All sections must have a title if more than 1 section is provided");this.button=button,this.sections=sections}},ListSection=class extends Section{rows;constructor(title,...rows){super("ListSection","rows",rows,10,title),this.rows=rows}},Row=class{id;title;description;constructor(id,title,description){if(id.length>200)throw new Error("Row id must be 200 characters or less");if(title.length>24)throw new Error("Row title must be 24 characters or less");if(description&&description.length>72)throw new Error("Row description must be 72 characters or less");this.id=id,this.title=title,description&&(this.description=description)}},ActionCatalog=class{name;parameters;get _type(){return"catalog_message"}constructor(thumbnail){this.name="catalog_message",thumbnail&&(this.parameters={thumbnail_product_retailer_id:thumbnail.product_retailer_id})}},ActionProduct=class{catalog_id;product_retailer_id;sections;get _type(){return this.product_retailer_id?"product":"product_list"}constructor(catalog_id,...products){let is_sections=isProductSections(products);if(is_sections&&products.length>1){if(products.length>10)throw new Error("Catalog must have between 1 and 10 product sections");for(let obj of products)if(!obj.title)throw new Error("All sections must have a title if more than 1 section is provided")}this.catalog_id=catalog_id,is_sections?this.sections=products:this.product_retailer_id=products[0].product_retailer_id}};var Media=class extends ClientMessage{id;link;constructor(file,isItAnID=!1){super(),this[isItAnID?"id":"link"]=file}},Audio=class extends Media{get _type(){return"audio"}constructor(audio,isItAnID=!1){super(audio,isItAnID)}},Document=class extends Media{caption;filename;get _type(){return"document"}constructor(document,isItAnID=!1,caption,filename){super(document,isItAnID),caption&&(this.caption=caption),filename&&(this.filename=filename)}},Image=class extends Media{caption;get _type(){return"image"}constructor(image,isItAnID=!1,caption){super(image,isItAnID),caption&&(this.caption=caption)}},Sticker=class extends Media{get _type(){return"sticker"}constructor(sticker,isItAnID=!1){super(sticker,isItAnID)}},Video=class extends Media{caption;get _type(){return"video"}constructor(video,isItAnID=!1,caption){super(video,isItAnID),caption&&(this.caption=caption)}};var Template=class _Template extends ClientMessage{name;language;components;get _type(){return"template"}constructor(name,language,...components){if(super(),this.name=name,this.language=typeof language=="string"?new Language(language):language,components.length){let pointers={theres_only_body:components.length===1&&components[0]instanceof BodyComponent,button_counter:0};this.components=components.map(cmpt=>cmpt._build(pointers)).filter(e=>!!e)}}static OTP(name,language,code){return new _Template(name,language,new BodyComponent(new BodyParameter(code)),new URLComponent(code))}},Language=class{code;policy;constructor(code,policy="deterministic"){this.policy=policy,this.code=code}},Currency=class{amount_1000;code;fallback_value;get _type(){return"currency"}constructor(amount_1000,code,fallback_value){if(amount_1000<=0)throw new Error("Currency must have an amount_1000 greater than 0");this.amount_1000=amount_1000,this.code=code,this.fallback_value=fallback_value}},DateTime=class{fallback_value;get _type(){return"date_time"}constructor(fallback_value){this.fallback_value=fallback_value}},ButtonComponent=class{type="button";sub_type;parameters;index=NaN;constructor(sub_type,parameter){this.sub_type=sub_type,this.parameters=[parameter]}_build(pointers){return this.index=pointers.button_counter++,this}},URLComponent=class _URLComponent extends ButtonComponent{constructor(parameter){super("url",new _URLComponent.Button(parameter))}static Button=class{type="text";text;constructor(text){if(!text.length)throw new Error("Button parameter can't be an empty string");this.text=text}}},PayloadComponent=class _PayloadComponent extends ButtonComponent{constructor(parameter){super("quick_reply",new _PayloadComponent.Button(parameter))}static Button=class{type="payload";payload;constructor(payload){if(!payload.length)throw new Error("Button parameter can't be an empty string");this.payload=payload}}},CatalogComponent=class _CatalogComponent extends ButtonComponent{constructor(thumbnail){super("catalog",new _CatalogComponent.Action(thumbnail))}static Action=class{type="action";action;constructor(thumbnail){this.action={thumbnail_product_retailer_id:thumbnail.product_retailer_id}}}},MPMComponent=class _MPMComponent extends ButtonComponent{constructor(thumbnail,...sections){super("mpm",new _MPMComponent.Action(thumbnail,sections))}static Action=class extends ClientLimitedMessageComponent{type="action";action;constructor(thumbnail,sections){if(super("MPMComponent","sections",sections,10),sections.length>1&&!sections.every(s=>!!s.title))throw new Error("All sections must have a title if more than 1 section is provided");this.action={thumbnail_product_retailer_id:thumbnail.product_retailer_id,sections}}}},CopyComponent=class _CopyComponent extends ButtonComponent{constructor(parameter){super("copy_code",new _CopyComponent.Action(parameter))}static Action=class{type="coupon_code";coupon_code;constructor(coupon_code){if(!coupon_code.length)throw new Error("Action coupon_code can't be an empty string");this.coupon_code=coupon_code}}},SkipButtonComponent=class extends ButtonComponent{constructor(){super()}_build(pointers){return pointers.button_counter++,null}},HeaderComponent=class{type;parameters;constructor(...parameters){this.type="header",this.parameters=parameters}_build(){return this}},HeaderParameter=class{type;text;currency;date_time;image;document;video;location;constructor(parameter){if(typeof parameter=="string"){if(parameter.length>60)throw new Error("Header text must be 60 characters or less");this.type="text"}else{if(parameter._type==="location"&&!(parameter.name&&parameter.address))throw new Error("Header location must have a name and address");this.type=parameter._type}Object.defineProperty(this,this.type,{value:parameter,enumerable:!0})}},BodyComponent=class{type;parameters;constructor(...parameters){this.type="body",this.parameters=parameters}_build({theres_only_body}){if(this.parameters&&!theres_only_body){for(let param of this.parameters)if(param.text&&param.text?.length>1024)throw new Error("Body text must be 1024 characters or less")}return this}},BodyParameter=class{type;text;currency;date_time;constructor(parameter){if(typeof parameter=="string"){if(parameter.length>32768)throw new Error("Body text must be 32768 characters or less");this.type="text"}else this.type=parameter._type;Object.defineProperty(this,this.type,{value:parameter,enumerable:!0})}};export{ActionButtons,ActionCatalog,ActionList,ActionProduct,Address,Audio,Birthday,Body,BodyComponent,BodyParameter,Button,ButtonComponent,CatalogComponent,Contacts,CopyComponent,Currency,DateTime,Document,Email,Footer,Header,HeaderComponent,HeaderParameter,Image,Interactive,Language,ListSection,Location,MPMComponent,Media,Name,Organization,PayloadComponent,Phone,Product,ProductSection,Reaction,Row,Section,SkipButtonComponent,Sticker,Template,Text,URLComponent,Url,Video,isProductSections};
//# sourceMappingURL=index.js.map
