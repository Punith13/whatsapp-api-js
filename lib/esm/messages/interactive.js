var ClientMessage=class{_build(){return JSON.stringify(this)}};var ClientLimitedMessageComponent=class{constructor(p,c,a,n){if(a.length>n)throw new Error(`${p} can't have more than ${n} ${c}`)}};var Interactive=class extends ClientMessage{constructor(action,body,header,footer){super();if(action._type!=="product"&&!body)throw new Error("Interactive must have a body component");if(action._type==="product"&&header)throw new Error("Interactive must not have a header component if action is a single product");if(action._type==="product_list"&&header?.type!=="text")throw new Error("Interactive must have a text header component if action is a product list");if(header&&action._type!=="button"&&header?.type!=="text")throw new Error("Interactive header must be of type text");this.type=action._type,this.action=action,body&&(this.body=body),header&&(this.header=header),footer&&(this.footer=footer)}get _type(){return"interactive"}},Body=class{constructor(text){if(text.length>1024)throw new Error("Body text must be less than 1024 characters");this.text=text}},Footer=class{constructor(text){if(text.length>60)throw new Error("Footer text must be 60 characters or less");this.text=text}},Header=class{constructor(object){if(typeof object=="string"){if(object.length>60)throw new Error("Header text must be 60 characters or less");this.type="text"}else if(this.type=object._type,"caption"in object)throw new Error(`Header ${this.type} must not have a caption`);this[this.type]=object}},ActionButtons=class extends ClientLimitedMessageComponent{constructor(...button){super("Reply buttons","button",button,3);let ids=button.map(b=>b[b.type].id);if(ids.length!==new Set(ids).size)throw new Error("Reply buttons must have unique ids");let titles=button.map(b=>b[b.type].title);if(titles.length!==new Set(titles).size)throw new Error("Reply buttons must have unique titles");this.buttons=button}get _type(){return"button"}},Button=class{constructor(id,title){if(id.length>256)throw new Error("Button id must be 256 characters or less");if(/^ | $/.test(id))throw new Error("Button id cannot have leading or trailing spaces");if(!title.length)throw new Error("Button title cannot be an empty string");if(title.length>20)throw new Error("Button title must be 20 characters or less");this.type="reply",this.reply={title,id}}},ActionList=class extends ClientLimitedMessageComponent{constructor(button,...sections){super("Action","sections",sections,10);if(!button.length)throw new Error("Button content cannot be an empty string");if(button.length>20)throw new Error("Button content must be 20 characters or less");if(sections.length>1&&!sections.every(obj=>"title"in obj))throw new Error("All sections must have a title if more than 1 section is provided");this.button=button,this.sections=sections}get _type(){return"list"}},Section=class extends ClientLimitedMessageComponent{constructor(name,keys_name,elements,max,title,title_length=24){super(name,keys_name,elements,max);if(title&&title.length>title_length)throw new Error(`${name} title must be ${title_length} characters or less`);title&&(this.title=title)}},ListSection=class extends Section{constructor(title,...rows){super("ListSection","rows",rows,10,title);this.rows=rows}},Row=class{constructor(id,title,description){if(id.length>200)throw new Error("Row id must be 200 characters or less");if(title.length>24)throw new Error("Row title must be 24 characters or less");if(description&&description.length>72)throw new Error("Row description must be 72 characters or less");this.id=id,this.title=title,description&&(this.description=description)}};function isProductSections(obj){return obj[0]instanceof ProductSection}var ActionCatalog=class{get _type(){return this.product_retailer_id?"product":"product_list"}constructor(catalog_id,...products){let is_sections=isProductSections(products);if(is_sections&&products.length>1){if(products.length>10)throw new Error("Catalog must have between 1 and 10 product sections");for(let obj of products)if(!("title"in obj))throw new Error("All sections must have a title if more than 1 section is provided")}this.catalog_id=catalog_id,is_sections?this.sections=products:this.product_retailer_id=products[0].product_retailer_id}},ProductSection=class extends Section{constructor(title,...products){super("ProductSection","products",products,30,title);this.product_items=products}},Product=class{constructor(product_retailer_id){this.product_retailer_id=product_retailer_id}};export{ActionButtons,ActionCatalog,ActionList,Body,Button,Footer,Header,Interactive,ListSection,Product,ProductSection,Row,Section};
//# sourceMappingURL=interactive.js.map
